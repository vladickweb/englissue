(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{141:function(e,t,a){},173:function(e,t,a){},194:function(e,t){},196:function(e,t){},220:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(17),r=a.n(c),i=(a(141),a(11)),o=a(16),l=a(21),u=a(20),d=(a(142),a(30)),h=a(28),j=a.n(h),b=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,a){return t.instance.post("/signup",{email:e,pwd:a})},this.login=function(e,a){return t.instance.post("/login",{email:e,pwd:a})},this.google=function(e){return t.instance.post("/google",{data:e})},this.logout=function(){return t.instance.get("/logout")},this.isloggedin=function(){return t.instance.post("/isloggedin")},this.instance=j.a.create({baseURL:"".concat("http://localhost:3001/api","/auth"),withCredentials:!0})},m=a(1),O=new b;function p(e){return Object(m.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(m.jsx)(d.b,{to:"/",className:"navbar-brand",href:"#",children:"Englissue"}),Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(m.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(m.jsx)("li",{className:"nav-item active",children:Object(m.jsx)(d.b,{to:"/iniciar-sesion",className:"nav-link",href:"#",children:"Iniciar Sesi\xf3n"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.b,{to:"/registro",className:"nav-link",href:"#",children:"Registrarse"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{className:"nav-link",onClick:function(){O.logout().then((function(t){return e.storeUser(null)})).catch((function(e){return console.log(e)}))},children:"Logout"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.b,{to:"/salas-chat",className:"nav-link",children:"Salas de chat"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.b,{to:"/mis-mensajes",className:"nav-link",href:"#",children:"Mis mensajes"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.b,{to:"/videochat",className:"nav-link",href:"#",children:"Videochat"})})]})})]})}var g=a(10),f=a(18),v=function e(){var t=this;Object(i.a)(this,e),this.getChatrooms=function(){return t.instance.get("/")},this.getOneChatroom=function(e){return t.instance.get("/".concat(e))},this.instance=j.a.create({baseURL:"".concat("http://localhost:3001/api","/chatrooms"),withCredentials:!0})},x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).refreshChatrooms=function(){e.chatroomService.getChatrooms().then((function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{chatrooms:t.data}))})).catch((function(e){return console.error(e)}))},e.displayChatRooms=function(){return e.state.chatrooms.map((function(e){return console.log(e),Object(m.jsx)(d.b,{to:"/salas-chat/".concat(e._id),children:Object(m.jsx)("h1",{children:e.title})},e._id)}))},e.state={chatrooms:null},e.chatroomService=new v,e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.refreshChatrooms()}},{key:"render",value:function(){return this.state.chatrooms?Object(m.jsx)("div",{children:this.displayChatRooms()}):Object(m.jsx)("h3",{children:"Loading..."})}}]),a}(n.Component),y=a(22),S=a(37),C=function e(){var t=this;Object(i.a)(this,e),this.createMessage=function(e){return t.instance.post("/".concat(e.id),e)},this.checkNewMessages=function(e){return t.instance.get("/".concat(e))},this.instance=j.a.create({baseURL:"".concat("http://localhost:3001/api","/chatmessages"),withCredentials:!0})},N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).refreshMessages=function(){n.chatroomService.getOneChatroom(n.props.match.params.id).then((function(e){console.log(e.data.messages,"es aqu\xed");var t=e.data.messages.map((function(e){return{email:e.name.email,body:e.body}}));n.setState(Object(g.a)(Object(g.a)({},n.state),{},{messages:Object(S.a)(t)}))})).catch((function(e){return console.log(e)}))},n.displayMessages=function(){return n.state.messages.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:e.email}),Object(m.jsx)("h2",{children:e.body})]},t)}))},n.handleChange=function(e){var t=e.target,a=t.value,s=t.name;n.setState(Object(g.a)(Object(g.a)({},n.state),{},Object(y.a)({},s,a)))},n.handleSubmit=function(e){e.preventDefault(),console.log("he entrado");var t=n.state.body,a=n.props.match.params.id;n.chatMessageService.createMessage({body:t,id:a}).then((function(){n.refreshMessages(),n.setState(Object(g.a)(Object(g.a)({},n.state),{},{body:""}))})).catch((function(e){return console.log(e)}))},n.handleCheckMessages=function(){n.interval=setInterval((function(){var e=n.props.match.params.id;n.chatMessageService.checkNewMessages(e).then((function(e){n.state.numberOfMessages!==e.data.numberOfMessagesFromDB&&n.setState(Object(g.a)(Object(g.a)({},n.state),{},{numberOfMessages:e.data.numberOfMessagesFromDB}),n.refreshMessages())})).catch((function(e){return console.log(e)}))}),1e3)},n.interval="",n.state={numberOfMessages:"0",users:null,messages:[{email:"",body:""}],body:""},n.chatroomService=new v,n.chatMessageService=new C,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.refreshMessages(),this.handleCheckMessages()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return console.log(this.state.messages,"hola"),this.state.messages?Object(m.jsxs)("div",{children:[this.displayMessages(),Object(m.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(m.jsx)("input",{onChange:this.handleChange,type:"text",name:"body"}),Object(m.jsx)("button",{type:"submit",children:"enviar"})]})]}):Object(m.jsx)("div",{children:"loading"})}}]),a}(n.Component),w=function e(){var t=this;Object(i.a)(this,e),this.uploadImg=function(e){return t.instance.post("/image",e)},this.instance=j.a.create({baseURL:"".concat("http://localhost:3001/api","/uploads"),withCredentials:!0})},M=function e(){var t=this;Object(i.a)(this,e),this.completeProfile=function(e){return t.instance.put("/complete-profile",{data:e})},this.instance=j.a.create({baseURL:"".concat("http://localhost:3001/api","/user"),withCredentials:!0})},k=a(71),D=a(123);a(173);function U(e){var t=Object(D.usePlacesWidget)({apiKey:"AIzaSyAY0CZ_05iEDMVKHjmcrTKjijo59PPAhQs",onPlaceSelected:function(t){var a=t.address_components[0].long_name,n=t.address_components[3].long_name;e.handleChangeDirection(a,n)}}).ref;return Object(m.jsx)("div",{children:Object(m.jsxs)(k.a.Group,{children:[Object(m.jsx)(k.a.Label,{style:{color:"black"},children:"Selecciona tu ubicaci\xf3n"}),Object(m.jsx)(k.a.Control,{style:{zIndex:99999},type:"text",ref:t})]})})}var L=a(48),I=a.n(L),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={latitude:"",longitude:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var a=t.coords.latitude,n=t.coords.longitude;console.log(a),console.log(n),e.changeState(a,n)}))}},{key:"changeState",value:function(e,t){this.setState({latitude:e,longitude:t},this.geolocation(e,t))}},{key:"geolocation",value:function(e,t){var a=this;I.a.setApiKey("AIzaSyAY0CZ_05iEDMVKHjmcrTKjijo59PPAhQs"),I.a.setLanguage("es"),I.a.setRegion("es"),I.a.setLocationType("ROOFTOP"),I.a.enableDebug(),I.a.fromLatLng(e,t).then((function(e){for(var t,n,s=0;s<e.results[0].address_components.length;s++)for(var c=0;c<e.results[0].address_components[s].types.length;c++)switch(e.results[0].address_components[s].types[c]){case"locality":t=e.results[0].address_components[s].long_name;break;case"country":n=e.results[0].address_components[s].long_name}console.log(t,n,a.props),a.props.handleChangeDirection(t,n)}),(function(e){console.error(e)}))}},{key:"render",value:function(){return Object(m.jsx)("div",{})}}]),a}(n.Component),_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={name:"",iban:"",image:"",rol:"",city:"",country:"",isLoading:!1,showManualDirection:!1},e.uploadService=new w,e.userService=new M,e.handleChange=function(t){var a=t.target,n=a.value,s=a.name;e.setState(Object(g.a)(Object(g.a)({},e.state),{},Object(y.a)({},s,n)))},e.handleChangeDirection=function(t,a){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{city:t,country:a}))},e.handleFile=function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isLoading:!0}));var a=new FormData;a.append("imageData",t.target.files[0]),e.uploadService.uploadImg(a).then((function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isLoading:!1,image:t.data.cloudinary_url}))})).catch((function(e){return alert("Error, esto lo hac\xe9is vosotros.")}))},e.handleSubmitTeacher=function(t){t.preventDefault(),e.state.country&&e.state.city?e.userService.completeProfile({name:e.state.name,rol:"teacher",city:e.state.city,country:e.state.country,image:e.state.image,iban:e.state.iban}).then((function(){e.setState({name:"",iban:"",image:"",rol:"",city:"",country:"",isLoading:!1,showManualDirection:!1}),document.querySelector("#ProfesionalsModal").classList.remove("show")})).catch((function(e){return console.log(e)})):(alert("No hemos podido detectar tu ubicaci\xf3n, por favor introduce tu ciudad."),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{showManualDirection:!0}),console.log(e.state)))},e.handleSubmitStudent=function(t){t.preventDefault(),e.state.country&&e.state.city?e.userService.completeProfile({name:e.state.name,rol:"student",city:e.state.city,country:e.state.country,image:e.state.image}).then((function(){e.setState({name:"",iban:"",image:"",rol:"",city:"",country:"",isLoading:!1,showManualDirection:!1}),document.querySelector("#studentModal").classList.remove("show")})).catch((function(e){return console.log(e)})):(alert("No hemos podido detectar tu ubicaci\xf3n, por favor introduce tu ciudad."),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{showManualDirection:!0}),console.log(e.state)))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"row justify-content-center",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#ProfesionalsModal",children:"Profesor"}),Object(m.jsx)("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#studentModal",children:"Estudiante"}),Object(m.jsx)(P,{handleChangeDirection:this.handleChangeDirection}),Object(m.jsx)("div",{className:"modal fade",id:"ProfesionalsModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",role:"document",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsx)("div",{className:"modal-header",children:Object(m.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Datos Profesor"})}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmitTeacher,children:[Object(m.jsx)("div",{className:"form-group",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Imagen de perfil"}),Object(m.jsx)("input",{onChange:function(t){return e.handleFile(t)},type:"file",className:"form-control",id:"image","aria-describedby":"emailHelp",name:"image",required:!0})]})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Nombre completo"}),Object(m.jsx)("input",{onChange:function(t){return e.handleChange(t)},type:"text",className:"form-control",id:"name",name:"name",required:!0})]})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"IBAN"}),Object(m.jsx)("input",{onChange:function(t){return e.handleChange(t)},type:"text",className:"form-control",id:"iban",name:"iban",required:!0})]})}),this.state.showManualDirection&&Object(m.jsx)(U,{handleChangeDirection:this.handleChangeDirection}),Object(m.jsx)("hr",{className:"mb-4"}),this.state.isLoading&&Object(m.jsx)("h1",{children:"LOADING"}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Enviar"})]})})]})})}),Object(m.jsx)("div",{className:"modal fade",id:"studentModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",role:"document",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsx)("div",{className:"modal-header",children:Object(m.jsx)("h5",{className:"modal-title",id:"ModalLabel",children:"Datos alumno"})}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("form",{onSubmit:function(t){return e.handleSubmitStudent(t)},children:[Object(m.jsx)("div",{className:"form-group",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Imagen de perfil"}),Object(m.jsx)("input",{onChange:function(t){return e.handleFile(t)},type:"file",className:"form-control",name:"image",required:!0})]})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Nombre completo"}),Object(m.jsx)("input",{onChange:function(t){return e.handleChange(t)},type:"text",className:"form-control",id:"name",name:"name",required:!0})]})}),this.state.showManualDirection&&Object(m.jsx)(U,{handleChangeDirection:this.handleChangeDirection}),this.state.isLoading&&Object(m.jsx)("h1",{children:"LOADING"}),Object(m.jsx)("hr",{className:"mb-4"}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Enviar"})]})})]})})})]})})}}]),a}(n.Component);function F(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"hola soy la home page"})})}var E=a(252),A=a(259),R=a(124),G=a.n(R),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).responseGoogle=function(e){n.authService.google(e.profileObj).then((function(e){n.props.storeUser(e.data),"unknown"===e.data.rol?n.props.history.push("/completar-perfil"):n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.authService=new b,n}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)(G.a,{clientId:"833518947705-arv7r2146m63ge01db6en2a775r1u7vv.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})})}}]),a}(n.Component),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInput=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(y.a)({},a,s))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,s=t.pwd;n.authService.login(a,s).then((function(e){n.props.storeUser(e.data),"unknown"===e.data.rol?n.props.history.push("/completar-perfil"):n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.state={email:"",pwd:""},n.authService=new b,n}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsxs)(E.a,{children:[Object(m.jsxs)(k.a,{onSubmit:this.handleFormSubmit,children:[Object(m.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(m.jsx)(k.a.Label,{children:"Email"}),Object(m.jsx)(k.a.Control,{name:"email",value:this.state.email,onChange:this.handleInput,type:"email",placeholder:"Enter email"})]}),Object(m.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(m.jsx)(k.a.Label,{children:"Password"}),Object(m.jsx)(k.a.Control,{name:"pwd",value:this.state.pwd,onChange:this.handleInput,type:"password",placeholder:"Password"})]}),Object(m.jsx)(A.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(m.jsx)(T,Object(g.a)({storeUser:this.props.storeUser},this.props))]})}}]),a}(n.Component),q=function e(){var t=this;Object(i.a)(this,e),this.createMessage=function(e){return t.instance.post("/".concat(e.id),e)},this.checkNewMessages=function(e){return t.instance.get("/".concat(e))},this.instance=j.a.create({baseURL:"".concat("http://localhost:3001/api","/chatmessages"),withCredentials:!0})},K=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={},e.messageService=new q,e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.refreshMessagesGroup()}},{key:"refreshMessagesGroup",value:function(){}},{key:"render",value:function(){return Object(m.jsx)("div",{children:"hola soy los mensajes"})}}]),a}(n.Component),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInput=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(y.a)({},a,s))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,s=t.pwd;n.authService.signup(a,s).then((function(e){n.props.storeUser(e.data),"unknown"===e.data.rol?n.props.history.push("/completar-perfil"):n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.state={email:"",pwd:""},n.authService=new b,n}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsx)(E.a,{children:Object(m.jsxs)(k.a,{onSubmit:this.handleFormSubmit,children:[Object(m.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(m.jsx)(k.a.Label,{children:"email"}),Object(m.jsx)(k.a.Control,{name:"email",value:this.state.email,onChange:this.handleInput,type:"email",placeholder:"Enter email"})]}),Object(m.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(m.jsx)(k.a.Label,{children:"Password"}),Object(m.jsx)(k.a.Control,{name:"pwd",value:this.state.pwd,onChange:this.handleInput,type:"password",placeholder:"Password"})]}),Object(m.jsx)(A.a,{variant:"primary",type:"submit",children:"Submit"})]})})}}]),a}(n.Component),V=a(23),H=a(256),J=a(257),Q=a(258),W=a(127),Y=a.n(W),Z=a(128),X=a.n(Z),$=a(125),ee=a(82),te=a.n(ee),ae=a(126),ne=a.n(ae),se=(a(220),ne.a.connect("http://localhost:5000"));var ce=function(){var e=Object(n.useState)(""),t=Object(V.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(),r=Object(V.a)(c,2),i=r[0],o=r[1],l=Object(n.useState)(!1),u=Object(V.a)(l,2),d=u[0],h=u[1],j=Object(n.useState)(""),b=Object(V.a)(j,2),O=b[0],p=b[1],g=Object(n.useState)(),f=Object(V.a)(g,2),v=f[0],x=f[1],y=Object(n.useState)(!1),S=Object(V.a)(y,2),C=S[0],N=S[1],w=Object(n.useState)(""),M=Object(V.a)(w,2),k=M[0],D=M[1],U=Object(n.useState)(!1),L=Object(V.a)(U,2),I=L[0],P=L[1],_=Object(n.useState)(""),F=Object(V.a)(_,2),E=F[0],A=F[1],R=Object(n.useRef)(),G=Object(n.useRef)(),T=Object(n.useRef)();return Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){o(e),R.current.srcObject=e})),se.on("me",(function(e){s(e)})),se.on("callUser",(function(e){h(!0),p(e.from),A(e.name),x(e.signal)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{style:{textAlign:"center",color:"#fff"},children:"Videochat"}),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"video-container",children:[Object(m.jsx)("div",{className:"video",children:i&&Object(m.jsx)("video",{playsInline:!0,muted:!0,ref:R,autoPlay:!0,style:{width:"300px"}})}),Object(m.jsx)("div",{className:"video",children:C&&!I?Object(m.jsx)("video",{playsInline:!0,ref:G,autoPlay:!0,style:{width:"300px"}}):null})]}),Object(m.jsxs)("div",{className:"myId",children:[Object(m.jsx)(Q.a,{id:"filled-basic",label:"Name",variant:"filled",value:E,onChange:function(e){return A(e.target.value)},style:{marginBottom:"20px"}}),Object(m.jsx)($.CopyToClipboard,{text:a,style:{marginBottom:"2rem"},children:Object(m.jsx)(H.a,{variant:"contained",color:"primary",startIcon:Object(m.jsx)(Y.a,{fontSize:"large"}),children:"Copy ID"})}),Object(m.jsx)(Q.a,{id:"filled-basic",label:"ID to call",variant:"filled",value:k,onChange:function(e){return D(e.target.value)}}),Object(m.jsxs)("div",{className:"call-button",children:[C&&!I?Object(m.jsx)(H.a,{variant:"contained",color:"secondary",onClick:function(){P(!0),T.current.destroy()},children:"End Call"}):Object(m.jsx)(J.a,{color:"primary","aria-label":"call",onClick:function(){return function(e){var t=new te.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){se.emit("callUser",{userToCall:e,signalData:t,from:a,name:E})})),t.on("stream",(function(e){G.current.srcObject=e})),se.on("callAccepted",(function(e){N(!0),t.signal(e)})),T.current=t}(k)},children:Object(m.jsx)(X.a,{fontSize:"large"})}),k]})]}),Object(m.jsx)("div",{children:d&&!C?Object(m.jsxs)("div",{className:"caller",children:[Object(m.jsxs)("h1",{children:[E," is calling..."]}),Object(m.jsx)(H.a,{variant:"contained",color:"primary",onClick:function(){N(!0);var e=new te.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){se.emit("answerCall",{signal:e,to:O})})),e.on("stream",(function(e){G.current.srcObject=e})),e.signal(v),T.current=e},children:"Answer"})]}):null})]})]})},re=function(e){var t=e.storeUser,a=e.loggedUser;return Object(m.jsxs)(f.d,{children:[Object(m.jsx)(f.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)(F,{})}}),Object(m.jsx)(f.b,{exact:!0,path:"/iniciar-sesion",render:function(e){return Object(m.jsx)(B,Object(g.a)({storeUser:t},e))}}),Object(m.jsx)(f.b,{exact:!0,path:"/registro",render:function(e){return Object(m.jsx)(z,Object(g.a)({},e))}}),Object(m.jsx)(f.b,{exact:!0,path:"/completar-perfil",render:function(e){return Object(m.jsx)(_,Object(g.a)({storeUser:t},e))}}),Object(m.jsx)(f.b,{exact:!0,path:"/salas-chat",render:function(e){return Object(m.jsx)(x,Object(g.a)({storeUser:t},e))}}),Object(m.jsx)(f.b,{path:"/salas-chat/:id",render:function(e){return Object(m.jsx)(N,Object(g.a)({},e))}}),Object(m.jsx)(f.b,{exact:!0,path:"/mis-mensajes",render:function(){return a?Object(m.jsx)(K,{loggedUser:a}):Object(m.jsx)(f.a,{to:"/iniciar-sesion"})}}),Object(m.jsx)(f.b,{exact:!0,path:"/videochat",render:function(){return Object(m.jsx)(ce,{})}})]})},ie=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchUser()},e.storeUser=function(t){return e.setState({loggedUser:t})},e.fetchUser=function(){e.authService.isloggedin().then((function(t){return e.storeUser(t.data)})).catch((function(t){return e.storeUser(null)}))},e.state={loggedUser:void 0},e.authService=new b,e}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{loggedUser:this.state.loggedUser,storeUser:this.storeUser}),Object(m.jsx)(re,{storeUser:this.storeUser,loggedUser:this.state.loggedUser})]})}}]),a}(n.Component),oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,261)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(m.jsx)(d.a,{children:Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(ie,{})})}),document.getElementById("root")),oe()}},[[222,1,2]]]);
//# sourceMappingURL=main.f4903d72.chunk.js.map