(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{166:function(e,t,n){},186:function(e,t,n){},200:function(e,t,n){},203:function(e,t,n){},205:function(e,t,n){},222:function(e,t){},224:function(e,t){},247:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(23),r=n.n(c),i=(n(166),n(11)),o=n(14),l=n(18),d=n(17),u=(n(167),n(15)),h=n(29),j=n.n(h),m=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,n){return t.instance.post("/signup",{email:e,pwd:n})},this.login=function(e,n){return t.instance.post("/login",{email:e,pwd:n})},this.google=function(e){return t.instance.post("/google",{data:e})},this.logout=function(){return t.instance.get("/logout")},this.isloggedin=function(){return t.instance.post("/isloggedin")},this.instance=j.a.create({baseURL:"".concat("https://englissue.herokuapp.com","/api/auth"),withCredentials:!0})},b=n(290),p=n(291),O=(n(186),n(1)),f=new m;function g(e){var t,n=null===(t=e.loggedUser)||void 0===t?void 0:t.balance;return Object(O.jsx)("div",{children:Object(O.jsxs)(b.a,{fixed:"top",variant:"light",expand:"md",className:"animate-navbar nav-theme justify-content-between margin-bottom",children:[Object(O.jsx)(u.b,{to:"/",className:"text-decoration-none text-dark",children:Object(O.jsx)("h1",{className:"margin-left",children:"Englissue"})}),Object(O.jsx)("div",{className:"margin-right",children:Object(O.jsx)(p.a,{className:"ml-auto",children:e.loggedUser?Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)(u.b,{to:"/gente-cerca",className:"nav-link margin",href:"#",children:"Englissuers"}),Object(O.jsx)(u.b,{to:"/salas-chat",className:"nav-link margin",children:"Salas de chat"}),Object(O.jsx)(u.b,{to:"/mis-mensajes",className:"nav-link margin",href:"#",children:"Mis mensajes"}),Object(O.jsx)(u.b,{to:"/videochat",className:"nav-link margin",href:"#",children:"Videochat"}),Object(O.jsx)(u.b,{to:"/profesores",className:"nav-link margin",href:"#",children:"Profesores"}),Object(O.jsx)(u.b,{to:"/mis-clases",className:"nav-link margin",href:"#",children:"Mis Clases"}),Object(O.jsx)(u.b,{to:"/iniciar-sesion",className:"text-decoration-none margin",children:Object(O.jsx)("span",{className:"nav-link",onClick:function(){f.logout().then((function(t){e.storeUser(null)})).catch((function(e){return console.log(e)}))},children:"Logout"})}),Object(O.jsxs)(u.b,{to:"/recargar-cuenta",className:"nav-link",href:"#",children:["Balance: ",n/100,"\u20ac"]})]}):Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)(u.b,{to:"/iniciar-sesion",className:"nav-link",href:"#",children:"Iniciar Sesi\xf3n"}),Object(O.jsx)(u.b,{to:"/registro",className:"nav-link",href:"#",children:"Registrarse"})]})})})]})})}var x=n(5),v=n(25),y=function e(){var t=this;Object(i.a)(this,e),this.getChatrooms=function(){return t.instance.get("/")},this.getOneChatroom=function(e){return t.instance.get("/".concat(e))},this.instance=j.a.create({baseURL:"".concat("https://englissue.herokuapp.com","/api/chatrooms"),withCredentials:!0})},N=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).refreshChatrooms=function(){e.chatroomService.getChatrooms().then((function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{chatrooms:t.data}))})).catch((function(e){return console.error(e)}))},e.displayChatRooms=function(){return e.state.chatrooms.map((function(e){return Object(O.jsx)("div",{className:"col-4 py-5 h-auto",children:Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsx)("div",{className:"row rounded-circle hw align-items-center bg-white image-rooms link",children:Object(O.jsx)(u.b,{to:"/salas-chat/".concat(e._id),className:"text-decoration-none text-dark",children:Object(O.jsx)("h1",{children:e.title})},e._id)})})})}))},e.state={chatrooms:null},e.chatroomService=new y,e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refreshChatrooms()}},{key:"render",value:function(){return this.state.chatrooms?Object(O.jsx)("div",{className:"container transparent margin-top radius",children:Object(O.jsxs)("div",{className:"row justify-content-center align-items-center text-center",children:[Object(O.jsx)("div",{className:"col-12 text-white mt-5",children:Object(O.jsx)("h1",{children:"Salas de Chat"})}),this.displayChatRooms()]})}):Object(O.jsx)("h3",{children:"Loading..."})}}]),n}(a.Component),w=n(22),C=n(43),S=function e(){var t=this;Object(i.a)(this,e),this.createMessage=function(e){return t.instance.post("/".concat(e.id),e)},this.checkNewMessages=function(e){return t.instance.get("/".concat(e))},this.instance=j.a.create({baseURL:"".concat("https://englissue.herokuapp.com","/api/chatmessages"),withCredentials:!0})},k=n(67),U=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).refreshMessages=function(){var e=a.props.match.params.id;a.chatroomService.getOneChatroom(e).then((function(e){var t=e.data.messages.map((function(e){return{name:e.name.name,body:e.body}}));a.setState(Object(x.a)(Object(x.a)({},a.state),{},{messages:Object(C.a)(t)}))})).catch((function(e){return console.log(e)}))},a.displayMessages=function(){return a.state.messages.map((function(e,t){return Object(O.jsxs)("div",{className:"m-5",children:[Object(O.jsx)("h5",{children:e.name}),Object(O.jsx)("p",{children:e.body})]},t)}))},a.handleChange=function(e){var t=e.target,n=t.value,s=t.name;a.setState(Object(x.a)(Object(x.a)({},a.state),{},Object(w.a)({},s,n)))},a.handleSubmit=function(e){e.preventDefault(),console.log("he entrado");var t=a.state.body,n=a.props.match.params.id;a.chatMessageService.createMessage({body:t,id:n}).then((function(){a.refreshMessages(),a.setState(Object(x.a)(Object(x.a)({},a.state),{},{body:""}))})).catch((function(e){return console.log(e)}))},a.handleCheckMessages=function(){a.interval=setInterval((function(){var e=a.props.match.params.id;a.chatMessageService.checkNewMessages(e).then((function(e){console.log(e),a.state.numberOfMessages!==e.data.numberOfMessagesFromDB&&a.setState(Object(x.a)(Object(x.a)({},a.state),{},{numberOfMessages:e.data.numberOfMessagesFromDB}),a.refreshMessages())})).catch((function(e){return console.log(e)}))}),1e3)},a.interval="",a.state={numberOfMessages:"0",users:null,messages:[{name:"",body:""}],body:""},a.chatroomService=new y,a.chatMessageService=new S,a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refreshMessages(),this.handleCheckMessages()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return this.state.messages?Object(O.jsx)("div",{className:"margin-top container",children:Object(O.jsxs)("div",{className:"row justify-content-center",children:[Object(O.jsx)("div",{className:"col-7 transparent chat radius text-white",children:this.displayMessages()}),Object(O.jsx)("div",{className:"col-7",children:Object(O.jsx)("form",{className:"form-group margin-negative",onSubmit:function(t){return e.handleSubmit(t)},children:Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)("input",{className:"form-control text-white",autoComplete:"off",onChange:this.handleChange,autoFocus:"autofocus",type:"text",name:"body"}),Object(O.jsx)("button",{className:"btn btn-success",type:"submit",children:Object(O.jsx)(k.a,{})})]})})})]})}):Object(O.jsx)("div",{children:"loading"})}}]),n}(a.Component),M=function e(){var t=this;Object(i.a)(this,e),this.uploadImg=function(e){return t.instance.post("/image",e)},this.instance=j.a.create({baseURL:"".concat("https://englissue.herokuapp.com","/api/uploads"),withCredentials:!0})},D=function e(){var t=this;Object(i.a)(this,e),this.completeProfile=function(e){return t.instance.put("/complete-profile",{data:e})},this.getSingleUser=function(e){return t.instance.get("/".concat(e))},this.updateUser=function(e){return t.instance.put("/update",{data:e})},this.getMyClasses=function(){return t.instance.get("/my-classes")},this.getMyGroups=function(e){return t.instance.post("/my-groups",{data:e})},this.getPeople=function(){return t.instance.get("/people")},this.instance=j.a.create({baseURL:"".concat("https://englissue.herokuapp.com","/api/user"),withCredentials:!0})},I=n(89),L=n(145);n(200);function _(e){var t=Object(L.usePlacesWidget)({apiKey:"AIzaSyAY0CZ_05iEDMVKHjmcrTKjijo59PPAhQs",onPlaceSelected:function(t){var n=t.address_components[0].long_name,a=t.address_components[3].long_name;e.handleChangeDirection(n,a)}}).ref;return Object(O.jsx)("div",{children:Object(O.jsxs)(I.a.Group,{children:[Object(O.jsx)(I.a.Label,{style:{color:"black"},children:"Selecciona tu ubicaci\xf3n"}),Object(O.jsx)(I.a.Control,{style:{zIndex:99999},type:"text",ref:t})]})})}var E=n(58),P=n.n(E),A=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={latitude:"",longitude:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var n=t.coords.latitude,a=t.coords.longitude;console.log(n),console.log(a),e.changeState(n,a)}))}},{key:"changeState",value:function(e,t){this.setState({latitude:e,longitude:t},this.geolocation(e,t))}},{key:"geolocation",value:function(e,t){var n=this;P.a.setApiKey("AIzaSyAY0CZ_05iEDMVKHjmcrTKjijo59PPAhQs"),P.a.setLanguage("es"),P.a.setRegion("es"),P.a.setLocationType("ROOFTOP"),P.a.enableDebug(),P.a.fromLatLng(e,t).then((function(e){for(var t,a,s=0;s<e.results[0].address_components.length;s++)for(var c=0;c<e.results[0].address_components[s].types.length;c++)switch(e.results[0].address_components[s].types[c]){case"locality":t=e.results[0].address_components[s].long_name;break;case"country":a=e.results[0].address_components[s].long_name}console.log(t,a,n.props),n.props.handleChangeDirection(t,a)}),(function(e){console.error(e)}))}},{key:"render",value:function(){return Object(O.jsx)("div",{})}}]),n}(a.Component),B=n(24),T=n(281),G=n(50),R=n.n(G),F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={name:"",iban:"",image:"",rol:"",city:"",country:"",price:0,description:"",isLoading:!1,showManualDirection:!1},e.uploadService=new M,e.userService=new D,e.handleChange=function(t){var n=t.target,a=n.value,s=n.name;e.setState(Object(x.a)(Object(x.a)({},e.state),{},Object(w.a)({},s,a)))},e.handleChangeDirection=function(t,n){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{city:t,country:n}))},e.handleFile=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isLoading:!0}));var n=new FormData;n.append("imageData",t.target.files[0]),e.uploadService.uploadImg(n).then((function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isLoading:!1,image:t.data.cloudinary_url}))})).catch((function(e){return alert("Error, esto lo hac\xe9is vosotros.")}))},e.handleSubmitTeacher=function(t){t.preventDefault(),e.state.country&&e.state.city?e.userService.completeProfile({name:e.state.name,rol:"teacher",city:e.state.city,country:e.state.country,image:e.state.image,iban:e.state.iban,price:e.state.price,description:e.state.description}).then((function(){e.setState({name:"",iban:"",image:"",rol:"",city:"",country:"",price:0,description:"",isLoading:!1,showManualDirection:!1}),document.querySelector("#ProfesionalsModal").classList.remove("show")})).catch((function(e){return console.log(e)})):(R.a.fire({icon:"error",title:"Error...",text:"No hemos podido detectar tu ubicaci\xf3n, por favor introduce tu ciudad."}),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{showManualDirection:!0}),console.log(e.state)))},e.handleSubmitStudent=function(t){t.preventDefault(),e.state.country&&e.state.city?e.userService.completeProfile({name:e.state.name,rol:"student",city:e.state.city,country:e.state.country,image:e.state.image}).then((function(){e.setState({name:"",iban:"",image:"",rol:"",city:"",country:"",isLoading:!1,showManualDirection:!1}),document.querySelector("#studentModal").classList.remove("show")})).catch((function(e){return console.log(e)})):(R.a.fire({icon:"error",title:"Error...",text:"No hemos podido detectar tu ubicaci\xf3n, por favor introduce tu ciudad."}),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{showManualDirection:!0}),console.log(e.state)))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{className:"container margin-top-2",children:Object(O.jsxs)("div",{className:"row justify-content-center text-center ",children:[Object(O.jsx)("div",{className:"col-6",children:Object(O.jsx)("button",{type:"button",className:"btn-lg btn-primary p-5 radius color-btn-2","data-toggle":"modal","data-target":"#ProfesionalsModal",children:Object(O.jsx)("h3",{children:"Profesor"})})}),Object(O.jsx)("div",{className:"col-6",children:Object(O.jsx)("button",{type:"button",className:"btn-lg btn-primary p-5 radius color-btn","data-toggle":"modal","data-target":"#studentModal",children:Object(O.jsx)("h3",{children:"Estudiante"})})}),Object(O.jsx)(A,{handleChangeDirection:this.handleChangeDirection}),Object(O.jsx)("div",{className:"modal fade",id:"ProfesionalsModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(O.jsx)("div",{className:"modal-dialog",role:"document",children:Object(O.jsxs)("div",{className:"modal-content transparent radius text-white p-5 color-btn-2",children:[Object(O.jsx)("div",{className:"modal-header",children:Object(O.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Datos Profesor"})}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsxs)("form",{onSubmit:this.handleSubmitTeacher,children:[Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("p",{children:"Imagen de perfil"}),Object(O.jsx)("input",{onChange:function(t){return e.handleFile(t)},type:"file",className:"form-control",id:"image","aria-describedby":"emailHelp",name:"image",required:!0})]})}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("p",{children:"Nombre completo"}),Object(O.jsx)("input",{onChange:function(t){return e.handleChange(t)},type:"text",className:"form-control",id:"name",name:"name",required:!0})]})}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("p",{children:"IBAN"}),Object(O.jsx)("input",{onChange:function(t){return e.handleChange(t)},type:"text",className:"form-control",id:"iban",name:"iban",required:!0})]})}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("p",{children:"Precio por sesi\xf3n"}),Object(O.jsx)("input",{onChange:function(t){return e.handleChange(t)},type:"number",className:"form-control",id:"price",name:"price",required:!0})]})}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("p",{children:"Descripci\xf3n"}),Object(O.jsx)("textarea",{name:"description",className:"form-control",id:"description",rows:"3",onChange:function(t){return e.handleChange(t)}})]})}),this.state.showManualDirection&&Object(O.jsx)(_,{handleChangeDirection:this.handleChangeDirection}),Object(O.jsx)("hr",{className:"mb-4"}),this.state.isLoading&&Object(O.jsx)(T.a,{className:"mt-4",animation:"border"}),Object(O.jsx)(B.AwesomeButton,{type:"secondary",children:"Enviar"})]})})]})})}),Object(O.jsx)("div",{className:"modal fade",id:"studentModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true",children:Object(O.jsx)("div",{className:"modal-dialog",role:"document",children:Object(O.jsxs)("div",{className:"modal-content transparent radius text-white p-5 color-btn-2",children:[Object(O.jsx)("div",{className:"modal-header",children:Object(O.jsx)("h5",{className:"modal-title",id:"ModalLabel",children:"Datos alumno"})}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsxs)("form",{onSubmit:function(t){return e.handleSubmitStudent(t)},children:[Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("h4",{children:"Imagen de perfil"}),Object(O.jsx)("input",{onChange:function(t){return e.handleFile(t)},type:"file",className:"form-control",name:"image",required:!0})]})}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("h4",{children:"Nombre completo"}),Object(O.jsx)("input",{onChange:function(t){return e.handleChange(t)},type:"text",className:"form-control",autoComplete:"off",id:"name",name:"name",required:!0})]})}),this.state.showManualDirection&&Object(O.jsx)(_,{handleChangeDirection:this.handleChangeDirection}),this.state.isLoading&&Object(O.jsx)(T.a,{className:"mt-4",animation:"border"}),Object(O.jsx)("hr",{className:"mb-4"}),Object(O.jsx)(B.AwesomeButton,{type:"secondary",children:"Enviar"})]})})]})})})]})})}}]),n}(a.Component);function q(){return Object(a.useEffect)((function(){!function(e,t,n){void 0===n&&(n=["#fff"]);var a=!0,s=document.getElementById("console"),c=1,r=1,i=!1,o=document.getElementById(t);o.setAttribute("style","color:"+n[0]),window.setInterval((function(){0===c&&!1===i?(i=!0,o.innerHTML=e[0].substring(0,c),window.setTimeout((function(){var t=n.shift();n.push(t);var a=e.shift();e.push(a),r=1,o.setAttribute("style","color:"+n[0]),c+=r,i=!1}),1e3)):c===e[0].length+1&&!1===i?(i=!0,window.setTimeout((function(){c+=r=-1,i=!1}),1e3)):!1===i&&(o.innerHTML=e[0].substring(0,c),c+=r)}),120),window.setInterval((function(){!0===a?(s.className="console-underscore hidden",a=!1):(s.className="console-underscore",a=!0)}),400)}(["Hola Englissuer","Conecta con gente!","Contrata profesionales"],"text",["tomato","white","lightblue"])}),[]),Object(O.jsx)("div",{className:"container margin-top",children:Object(O.jsx)("div",{className:"row justify-content-center dark",children:Object(O.jsxs)("div",{className:"console-container",children:[Object(O.jsx)("span",{id:"text"}),Object(O.jsx)("div",{className:"console-underscore",id:"console",children:"_"})]})})})}var V=n(147),z=n.n(V),H=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).responseGoogle=function(e){a.authService.google(e.profileObj).then((function(e){a.props.storeUser(e.data),"unknown"===e.data.rol?a.props.history.push("/completar-perfil"):a.props.history.push("/")})).catch((function(e){return console.log(e)}))},a.authService=new m,a}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsx)(z.a,{className:"",clientId:"833518947705-arv7r2146m63ge01db6en2a775r1u7vv.apps.googleusercontent.com",buttonText:"Entra con Google",style:{display:"none"},onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})})}}]),n}(a.Component),K=(n(203),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleInput=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(w.a)({},n,s))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,s=t.pwd;a.authService.login(n,s).then((function(e){a.props.storeUser(e.data),"unknown"===e.data.rol?a.props.history.push("/completar-perfil"):a.props.history.push("/")})).catch((function(e){return console.log(e)}))},a.state={email:"",pwd:""},a.authService=new m,a}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"row justify-content-center margin-auth",children:Object(O.jsx)("div",{className:"col-5 transparent p-5 radius text-white",children:Object(O.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(O.jsx)("h3",{children:"Iniciar sesi\xf3n"}),Object(O.jsxs)("div",{className:"form-group mb-3",children:[Object(O.jsx)("label",{children:"Email"}),Object(O.jsx)("input",{autoComplete:"off",type:"email",name:"email",value:this.state.email,onChange:this.handleInput,className:"form-control text-white",placeholder:"Introduce tu email"})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Contrase\xf1a"}),Object(O.jsx)("input",{type:"password",name:"pwd",value:this.state.pwd,onChange:this.handleInput,className:"form-control text-white",placeholder:"Enter password"})]}),Object(O.jsx)("div",{className:"row justify-content-center my-4",children:Object(O.jsx)(B.AwesomeButton,{type:"secondary",children:"Iniciar Sesi\xf3n"})}),Object(O.jsx)("div",{className:"d-flex justify-content-center mb-4",children:Object(O.jsx)(H,Object(x.a)({storeUser:this.props.storeUser},this.props))}),Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsxs)("p",{className:"forgot-password",children:["Tienes una \xa0",Object(O.jsx)(u.b,{to:"/registro",children:"cuenta"}),"?"]})})]})})})}}]),n}(a.Component)),W=n(282),J=function e(){var t=this;Object(i.a)(this,e),this.createGroup=function(e){return t.instance.post("/create",{data:e})},this.createMessage=function(e){return t.instance.post("/message",{data:e})},this.getMyGroups=function(){return t.instance.get("/get-my-groups")},this.instance=j.a.create({baseURL:"".concat("https://englissue.herokuapp.com","/api/messages"),withCredentials:!0})},Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).refreshGroups=function(){a.messageService.getMyGroups().then((function(e){a.setState(Object(x.a)(Object(x.a)({},a.state),{},{groups:e.data.groups}))})).catch((function(e){return console.log(e)}))},a.displayGroups=function(){return a.state.groups.map((function(e){var t=[];t.push(e.users[0]._id),t.push(e.users[1]._id);var n=a.props.loggedUser._id,s=t.filter((function(e,t){return e!==n}));return Object(O.jsxs)("div",{className:"row align-items-center justify-content-center mb-3",children:[Object(O.jsx)("div",{className:"col-10",children:Object(O.jsxs)("h3",{className:"text-white",children:[e.users[0].name," con ",e.users[1].name]})}),Object(O.jsx)("div",{className:"col-2",children:Object(O.jsx)(u.b,{className:"text-decoration-none",to:"/mis-mensajes/".concat(s[0]),children:Object(O.jsx)(k.a,{size:"lg"})})})]})}))},a.state={groups:null},a.messageService=new J,a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refreshGroups()}},{key:"render",value:function(){return this.state.groups?Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsx)("div",{className:"col-6",children:Object(O.jsx)("div",{className:"p-5 transparent radius margin-top",children:Object(O.jsx)(W.a,{className:"mt-4",children:this.displayGroups()})})})})}):Object(O.jsx)("h3",{children:"Loading..."})}}]),n}(a.Component),Z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).displayMessages=function(){return a.state.messages.map((function(e){return Object(O.jsxs)("div",{className:"m-5",children:[Object(O.jsx)("h5",{children:e.name.name}),Object(O.jsx)("p",{children:e.body})]},e._id)}))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.body,s=t.idGroup,c=a.props.loggedUser._id,r=document.querySelector("#form");a.messagesService.createMessage({body:n,_id:c,idGroup:s}).then((function(){a.checkIfExistsGroup(),a.setState(Object(x.a)(Object(x.a)({},a.state),{},{body:""}),r.reset())})).catch((function(e){return console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.value,s=t.name;a.setState(Object(x.a)(Object(x.a)({},a.state),{},Object(w.a)({},s,n)))},a.state={idGroup:null,messages:null,body:null},a.userService=new D,a.messagesService=new J,a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.checkIfExistsGroup()}},{key:"checkIfExistsGroup",value:function(){var e,t=this,n=this.props.match.params.id,a=null===(e=this.props.loggedUser)||void 0===e?void 0:e._id;this.userService.getMyGroups({id:n,_id:a}).then((function(e){console.log(e,"data"),0===e.data.group.length?t.createMessageGroup():t.setState(Object(x.a)(Object(x.a)({},t.state),{},{messages:e.data.group[0].messages,idGroup:e.data.group[0]._id}))})).catch((function(e){console.log("holaaaaaaaaaaaaaaaaaaaaa"),console.log(e)}))}},{key:"createMessageGroup",value:function(){var e=this,t=this.props.match.params.id,n=this.props.loggedUser._id;this.messagesService.createGroup({id:t,_id:n}).then((function(){e.checkIfExistsGroup()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{className:"margin-top",children:this.state.messages&&Object(O.jsx)("div",{className:"margin-chat container",children:Object(O.jsxs)("div",{className:"row justify-content-center",children:[Object(O.jsx)("div",{className:"col-7 transparent chat radius text-white",children:this.displayMessages()}),Object(O.jsx)("div",{className:"col-7",children:Object(O.jsx)("form",{className:"form-group margin-negative",onSubmit:function(t){return e.handleSubmit(t)},children:Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)("input",{className:"form-control text-white",autoComplete:"off",onChange:this.handleChange,autoFocus:"autofocus",type:"text",name:"body"}),Object(O.jsx)("button",{className:"btn btn-success",type:"submit",children:Object(O.jsx)(k.a,{})})]})})})]})})})}}]),n}(a.Component),Q=n(283),X=n(146),$=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(x.a)(Object(x.a)({},a.state),{},Object(w.a)({},n,s)))},a.state={classes:null,searchValue:""},a.userService=new D,a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.userService.getMyClasses().then((function(t){var n=t.data.filteredArr;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{classes:n}))})).catch((function(e){return console.log(e)}))}},{key:"countReapeatedClasses",value:function(){}},{key:"displayClasses",value:function(){var e=this;if(this.state.classes){var t=this.state.classes.filter((function(t){return t.name.toLowerCase().includes(e.state.searchValue.toLowerCase())}));return t.length>0?t.map((function(e,t){return Object(O.jsx)("li",{className:"list-group-item my-5 bg-transparent text-white border-none",children:Object(O.jsxs)("div",{className:"row align-items-center",children:[Object(O.jsx)("div",{className:"col-3 text-center",children:Object(O.jsx)("img",{className:"image-list",src:e.image,alt:e.name})}),Object(O.jsx)("div",{className:"col-3 h1 text-center",children:e.cuantity}),Object(O.jsx)("div",{className:"col-3",children:Object(O.jsx)("h3",{children:e.name})}),Object(O.jsx)("div",{className:"col-3",children:Object(O.jsx)(u.b,{to:"/mis-mensajes/".concat(e._id),children:Object(O.jsx)(B.AwesomeButton,{type:"secondary",children:"Enviar un mensaje"})})})]})},e+t)})):Object(O.jsx)("h1",{children:"no hay resultados"})}return Object(O.jsx)("h1",{children:"loading..."})}},{key:"render",value:function(){return Object(O.jsx)("div",{className:"margin-top",children:Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsxs)("div",{className:"col-8",children:[Object(O.jsx)(Q.a,{className:"mb-3 mt-4 transparent radius p-3",children:Object(O.jsx)(X.a,{className:"text-white",onChange:this.handleChange,name:"searchValue",value:this.state.searchValue,placeholder:"Buscar por nombre...","aria-label":"buscar"})}),Object(O.jsx)("ul",{className:"list-group transparent radius p-5",children:Object(O.jsxs)("div",{className:"row justify-content-center",children:[Object(O.jsx)("div",{className:"col-3"}),Object(O.jsx)("div",{className:"col-3 h2 text-white",children:"N\xfamero de Clases"}),Object(O.jsx)("div",{className:"col-3 h2 text-white",children:"Nombre"}),Object(O.jsx)("div",{className:"col-3"}),this.displayClasses()]})})]})})})}}]),n}(a.Component);function ee(e){var t=e._id,n=(e.price,e.image),a=(e.description,e.name);return Object(O.jsxs)("div",{className:"card transparent radius text-white mb-5 ",style:{height:"35rem"},children:[Object(O.jsx)("div",{className:"h3 text-center mt-3",children:a}),Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsx)("img",{className:"card-img-top image-card",style:{objectFit:"cover"},src:n,alt:"Card cap"})}),Object(O.jsx)("div",{className:"card-body text-center",children:Object(O.jsx)("div",{className:"mt-5",children:Object(O.jsx)(u.b,{to:"/mis-mensajes/".concat(t),children:Object(O.jsx)(B.AwesomeButton,{type:"secondary",children:"Enviar mensaje"})})})})]})}var te=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).refreshPeople=function(){a.userService.getPeople().then((function(e){a.setState(Object(x.a)(Object(x.a)({},a.state),{},{people:e.data.users}))})).catch((function(e){return console.error(e)}))},a.displayUsers=function(){return a.state.people.map((function(e){return Object(O.jsx)("div",{className:"col-4",children:Object(O.jsx)(ee,Object(x.a)({},e))},e._id)}))},a.state={people:null},a.userService=new D,a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refreshPeople()}},{key:"render",value:function(){return Object(O.jsx)("div",{className:"margin-chat",children:Object(O.jsx)("div",{className:"container p-5",children:this.state.people?Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"row justify-content-center text-center",children:this.props.loggedUser&&Object(O.jsxs)("div",{className:"col-8 mb-5 h1 transparent radius text-white",children:["Englissuers por ",this.props.loggedUser.direction.city]})}),Object(O.jsx)("div",{className:"row justify-content-around",children:this.state.people&&this.displayUsers()})]}):Object(O.jsx)("h1",{children:"No hay Englissuers cerca de tu ubicaci\xf3n :("})})})}}]),n}(a.Component),ne=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleInput=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(w.a)({},n,s))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,s=t.pwd;a.authService.signup(n,s).then((function(e){a.props.storeUser(e.data),console.log(e,"ssssssssssssssssssssssss"),"unknown"===e.data.rol?a.props.history.push("/completar-perfil"):a.props.history.push("/")})).catch((function(e){return console.log(e)}))},a.state={email:"",pwd:""},a.authService=new m,a}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"row justify-content-center margin-auth",children:Object(O.jsx)("div",{className:"col-5 transparent p-5 radius text-white",children:Object(O.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(O.jsx)("h3",{children:"Registro"}),Object(O.jsxs)("div",{className:"form-group mb-3",children:[Object(O.jsx)("label",{children:"Email"}),Object(O.jsx)("input",{autoComplete:"off",type:"email",name:"email",value:this.state.email,onChange:this.handleInput,className:"form-control text-white",placeholder:"Introduce tu email"})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Contrase\xf1a"}),Object(O.jsx)("input",{type:"password",name:"pwd",value:this.state.pwd,onChange:this.handleInput,className:"form-control text-white",placeholder:"Enter password"})]}),Object(O.jsx)("div",{className:"row justify-content-center my-4",children:Object(O.jsx)(B.AwesomeButton,{type:"secondary",children:"Registrarse"})}),Object(O.jsx)("div",{className:"d-flex justify-content-center mb-4",children:Object(O.jsx)(H,Object(x.a)({storeUser:this.props.storeUser},this.props))}),Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsxs)("p",{className:"forgot-password",children:["Tienes cuenta? Haz click \xa0",Object(O.jsx)(u.b,{to:"/registro",children:"aqu\xed"})]})})]})})})}}]),n}(a.Component),ae=n(84),se=n.n(ae),ce=n(148),re=n(27),ie=n(69),oe=n(149),le=function e(){var t=this;Object(i.a)(this,e),this.createCheckout=function(e,n){return t.instance.post("/",{id:e,amount:n})},this.instance=j.a.create({baseURL:"".concat("https://englissue.herokuapp.com","/api/checkout/"),withCredentials:!0})};function de(e){var t=new le,n=Object(a.useState)(),s=Object(re.a)(n,2),c=s[0],r=s[1],i=Object(oe.a)("pk_test_51JeGZpKYMQZormJY9mmaWdIZwUIWfYSmYvgDdWDRsdyRWb5PLnpy7vhJe8j19k8gPCsnens0gwtFhWU4xJBkna1R00AsUuTm5a");console.log(e);var o=function(){var n=Object(ie.useStripe)(),a=Object(ie.useElements)(),s=function(){var s=Object(ce.a)(se.a.mark((function s(r){var i,o,l,d,u;return se.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r.preventDefault(),c||alert("selecciona la cantidad a ingresar"),s.next=4,n.createPaymentMethod({type:"card",card:a.getElement(ie.CardElement)});case 4:if(i=s.sent,o=i.error,l=i.paymentMethod,o){s.next=17;break}return R.a.fire({position:"top-end",icon:"success",title:"Pago completado",showConfirmButton:!1,timer:1500}),d=l.id,s.next=12,t.createCheckout(d,c);case 12:u=s.sent,u.data,e.fetchUser(),s.next=18;break;case 17:R.a.fire({icon:"error",title:"Oops...",text:o.message});case 18:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsx)("div",{className:"col-6",children:Object(O.jsxs)("form",{onSubmit:s,className:"form-group",children:[Object(O.jsx)(ie.CardElement,{className:"form-control"}),Object(O.jsx)(B.AwesomeButton,{type:"secondary",children:"Aceptar"})]})})})};return Object(O.jsx)("div",{className:"container margin-top",children:Object(O.jsx)("div",{className:"row justify-content-center align-items-center transparent p-5 radius text-white",children:Object(O.jsxs)("col-8",{children:[Object(O.jsx)("h1",{className:"mb-5",children:"Pasarela de pago"}),Object(O.jsxs)("div",{className:"row justify-content-center text-center",children:[Object(O.jsxs)("div",{className:"row mb-5",children:[Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsx)(B.AwesomeButton,{type:"secondary",action:function(){return r(1e3)},children:"10\u20ac"})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsx)(B.AwesomeButton,{type:"secondary",action:function(){return r(2500)},children:"25\u20ac"})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsx)(B.AwesomeButton,{type:"secondary",action:function(){return r(5e3)},children:"50\u20ac"})})]}),c&&Object(O.jsxs)("h3",{className:"mb-3 mt-3",children:["cantidad seleccionada: ",c/100,"\u20ac"]}),Object(O.jsx)(ie.Elements,{stripe:i,children:Object(O.jsx)(o,{})}),Object(O.jsx)("div",{children:Object(O.jsx)("img",{height:"150rem",className:"mt-3",src:"https://lapeorempresadelmundo.es/wp-content/uploads/2019/12/pagoseguro-stripe.png",alt:"checkout"})})]})]})})})}var ue=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={teacher:null,balance:null},a.userService=new D,a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refreshTeacher(),this.getCurrentBalance()}},{key:"getCurrentBalance",value:function(){var e=this;this.userService.getSingleUser(this.props.loggedUser._id).then((function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{balance:t.data.User.balance}))})).catch((function(e){return console.log(e)}))}},{key:"refreshTeacher",value:function(){var e=this;this.userService.getSingleUser(this.props.match.params.id).then((function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{teacher:t.data.User}))})).catch((function(e){return console.log(e)}))}},{key:"checkout",value:function(){var e=this,t=this.props.loggedUser._id;this.state.balance>this.state.teacher.price?this.userService.updateUser({id:t,amount:this.state.teacher.price,teacher:this.props.match.params.id}).then((function(){console.log(e.props),e.props.fetchUser(),e.getCurrentBalance()})).catch((function(e){return console.log(e)})):(R.a.fire({icon:"error",title:"Error...",text:"No hemos podido detectar tu ubicaci\xf3n, por favor introduce tu ciudad."}),this.props.history.push("/recargar-cuenta"))}},{key:"displayTeacher",value:function(){var e=this;return this.state.teacher?Object(O.jsxs)("div",{className:"row align-items-center justify-content-between",children:[Object(O.jsx)("div",{className:"col-6 ",children:Object(O.jsx)("img",{src:this.state.teacher.image,className:"image-card",alt:""})}),Object(O.jsxs)("div",{className:"ml-4 col-6 text-white",children:[Object(O.jsx)("h1",{children:this.state.teacher.name}),Object(O.jsx)("h3",{children:this.state.teacher.description})]}),Object(O.jsxs)(B.AwesomeButton,{className:"mt-5",type:"secondary",onClick:console.log("funcionooo"),action:function(){return e.checkout()},children:["Reserva una hora con ",this.state.teacher.name," por solo ",this.state.teacher.price/100,"e."]})]}):Object(O.jsx)("h1",{children:"cargando..."})}},{key:"render",value:function(){return Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"row justify-content-center margin-top transparent radius p-5",children:Object(O.jsx)("div",{className:"col-md-7",children:this.displayTeacher()})})})}}]),n}(a.Component),he=function e(){var t=this;Object(i.a)(this,e),this.getAllTeachers=function(){return t.instance.get("/")},this.instance=j.a.create({baseURL:"".concat("https://englissue.herokuapp.com","/api/teachers"),withCredentials:!0})};n(204);function je(e){var t=e._id,n=e.price,a=e.image,s=e.description,c=e.name;return Object(O.jsxs)("div",{className:"card transparent radius text-white mb-5 ",style:{height:"35rem"},children:[Object(O.jsx)("div",{className:"h3 text-center mt-3",children:c}),Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsx)("img",{className:"card-img-top image-card",style:{objectFit:"cover"},src:a,alt:"Card cap"})}),Object(O.jsxs)("div",{className:"card-body text-center",children:[Object(O.jsx)("p",{className:"card-text",children:s}),Object(O.jsx)("div",{className:"mt-5",children:Object(O.jsx)(u.b,{to:"/profesores/".concat(t),props:s,children:Object(O.jsxs)(B.AwesomeButton,{type:"secondary",children:[n/100," euros/hora"]})})})]})]})}n(205);var me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).refreshTeachers=function(){e.teacherServices.getAllTeachers().then((function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{teachers:t.data}))})).catch((function(e){return console.log(e)}))},e.displayTeachers=function(){var t=e.state.teachers.filter((function(t){return t.name.toLowerCase().includes(e.state.searchValue.toLowerCase())}));return t.length>0?t.map((function(e){return Object(O.jsx)("div",{className:"col-4",children:Object(O.jsx)(je,Object(x.a)({},e))},e._id)})):Object(O.jsx)("p",{children:"Sin resultados"})},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(x.a)(Object(x.a)({},e.state),{},Object(w.a)({},a,s)))},e.state={teachers:null,searchValue:""},e.teacherServices=new he,e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refreshTeachers()}},{key:"render",value:function(){return this.state.teachers?Object(O.jsxs)("div",{className:"margin-top",children:[Object(O.jsx)("div",{className:"container mt-5 p-5 radius transparent",children:Object(O.jsx)("input",{autoComplete:"off",type:"text",className:"form-control text-white",placeholder:"Buscar profesionales",onChange:this.handleChange,name:"searchValue"})}),Object(O.jsx)("div",{className:"container p-5",children:Object(O.jsx)("div",{className:"row justify-content-around",children:this.displayTeachers()})})]}):Object(O.jsx)("h3",{children:"Loading..."})}}]),n}(a.Component),be=n(287),pe=n(288),Oe=n(289),fe=n(152),ge=n.n(fe),xe=n(153),ve=n.n(xe),ye=n(150),Ne=n(101),we=n.n(Ne),Ce=n(151),Se=n.n(Ce);n(247);var ke=function(){var e=Object(a.useState)(""),t=Object(re.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(),r=Object(re.a)(c,2),i=r[0],o=r[1],l=Object(a.useState)(!1),d=Object(re.a)(l,2),u=d[0],h=d[1],j=Object(a.useState)(""),m=Object(re.a)(j,2),b=m[0],p=m[1],f=Object(a.useState)(),g=Object(re.a)(f,2),x=g[0],v=g[1],y=Object(a.useState)(!1),N=Object(re.a)(y,2),w=N[0],C=N[1],S=Object(a.useState)(""),k=Object(re.a)(S,2),U=k[0],M=k[1],D=Object(a.useState)(!1),I=Object(re.a)(D,2),L=I[0],_=I[1],E=Object(a.useState)(""),P=Object(re.a)(E,2),A=P[0],B=P[1],T=Object(a.useRef)(),G=Object(a.useRef)(),R=Object(a.useRef)(),F=Object(a.useState)(Se.a.connect("https://englissue.herokuapp.com")),q=Object(re.a)(F,2),V=q[0];return q[1],Object(a.useEffect)((function(){return navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){o(e),T.current.srcObject=e})),V.on("me",(function(e){s(e),console.log(G.current.remote.state)})),V.on("callUser",(function(e){h(!0),p(e.from),B(e.name),v(e.signal)})),function(){V.disconnect()}}),[]),Object(O.jsx)("div",{className:"container margin-top",children:Object(O.jsxs)("div",{className:"row justify-content-center text-center transparent radius p-5 align-items-center",children:[Object(O.jsx)("div",{className:"col-10",children:Object(O.jsxs)("div",{className:"row align-items-center mb-5",children:[Object(O.jsx)("div",{className:"col-6",children:Object(O.jsx)("div",{className:"video",children:i&&Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:T,autoPlay:!0,style:{width:"300px"}})})}),Object(O.jsx)("div",{className:"col-6",children:Object(O.jsx)("div",{className:"video",children:G?Object(O.jsx)("video",{playsInline:!0,ref:G,autoPlay:!0,style:{width:"300px"}}):null})})]})}),Object(O.jsxs)("div",{className:"myId row justify-content-center",children:[Object(O.jsx)(Oe.a,{autoComplete:"off",id:"filled-basic",label:"Nombre",variant:"filled",value:A,onChange:function(e){return B(e.target.value)},style:{marginBottom:"20px"}}),Object(O.jsx)(ye.CopyToClipboard,{text:n,style:{marginBottom:"2rem"},children:Object(O.jsx)(be.a,{variant:"contained",color:"primary",startIcon:Object(O.jsx)(ge.a,{fontSize:"large"}),children:"Copiar ID"})}),Object(O.jsx)(Oe.a,{autoComplete:"off",id:"filled-basic",label:"ID destinatario",variant:"filled",value:U,onChange:function(e){return M(e.target.value)}}),Object(O.jsx)("div",{className:"call-button",children:w&&!L?Object(O.jsx)(be.a,{variant:"contained",color:"secondary",onClick:function(){_(!0),R.current.destroy()},children:"Terminar llamada"}):Object(O.jsx)(pe.a,{color:"primary","aria-label":"call",onClick:function(){return function(e){var t=new we.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){console.log("signal"),V.emit("callUser",{userToCall:e,signalData:t,from:n,name:A},console.log("peer signal"))})),t.on("stream",(function(e){console.log("entroooo"),G.current.srcObject=e}),console.log(i)),V.on("callAccepted",(function(e){console.log("accepted"),C(!0),t.signal(e)}),console.log(G.current.remote.state)),R.current=t}(U)},children:Object(O.jsx)(ve.a,{fontSize:"large"})})})]}),Object(O.jsx)("div",{children:u&&!w?Object(O.jsxs)("div",{className:"caller",children:[Object(O.jsxs)("h1",{children:[A," te est\xe1 llamando..."]}),Object(O.jsx)(be.a,{variant:"contained",color:"primary",onClick:function(){C(!0);var e=new we.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){V.emit("answerCall",{signal:e,to:b})})),e.on("stream",(function(e){G.current.srcObject=e})),e.signal(x),R.current=e},children:"Aceptar"})]}):null})]})})},Ue=function(e){var t=e.storeUser,n=e.loggedUser,a=e.fetchUser;return Object(O.jsxs)(v.d,{children:[Object(O.jsx)(v.b,{exact:!0,path:"/",render:function(){return Object(O.jsx)(q,{})}}),Object(O.jsx)(v.b,{exact:!0,path:"/iniciar-sesion",render:function(e){return Object(O.jsx)(K,Object(x.a)({storeUser:t},e))}}),Object(O.jsx)(v.b,{exact:!0,path:"/registro",render:function(e){return Object(O.jsx)(ne,Object(x.a)({storeUser:t},e))}}),Object(O.jsx)(v.b,{exact:!0,path:"/completar-perfil",render:function(e){return Object(O.jsx)(F,Object(x.a)({storeUser:t},e))}}),Object(O.jsx)(v.b,{exact:!0,path:"/salas-chat",render:function(e){return Object(O.jsx)(N,Object(x.a)({storeUser:t},e))}}),Object(O.jsx)(v.b,{path:"/salas-chat/:id",render:function(e){return Object(O.jsx)(U,Object(x.a)({},e))}}),Object(O.jsx)(v.b,{exact:!0,path:"/mis-mensajes",render:function(e){return Object(O.jsx)(Y,Object(x.a)({loggedUser:n},e))}}),Object(O.jsx)(v.b,{exact:!0,path:"/videochat",render:function(){return Object(O.jsx)(ke,{})}}),Object(O.jsx)(v.b,{exact:!0,path:"/profesores",render:function(){return Object(O.jsx)(me,{})}}),Object(O.jsx)(v.b,{exact:!0,path:"/recargar-cuenta",render:function(){return n?Object(O.jsx)(de,{fetchUser:a,loggedUser:n,storeUser:t}):Object(O.jsx)(v.a,{to:"/iniciar-sesion"})}}),Object(O.jsx)(v.b,{exact:!0,path:"/mis-clases",render:function(){return Object(O.jsx)($,{loggedUser:n})}}),Object(O.jsx)(v.b,{path:"/profesores/:id",render:function(e){return Object(O.jsx)(ue,Object(x.a)({loggedUser:n,fetchUser:a},e))}}),Object(O.jsx)(v.b,{path:"/mis-mensajes/:id",render:function(e){return Object(O.jsx)(Z,Object(x.a)({loggedUser:n},e))}}),Object(O.jsx)(v.b,{path:"/gente-cerca",render:function(e){return Object(O.jsx)(te,Object(x.a)({loggedUser:n},e))}})]})},Me=(n(249),n(154)),De=(n(250),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).componentDidMount=function(){e.fetchUser()},e.storeUser=function(t){return e.setState({loggedUser:t})},e.fetchUser=function(){e.authService.isloggedin().then((function(t){e.storeUser(t.data)})).catch((function(t){return e.storeUser(null)}))},e.state={loggedUser:void 0},e.authService=new m,e}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"no-scroll",style:{width:"100%",height:"100%"},children:[Object(O.jsx)(g,{loggedUser:this.state.loggedUser,storeUser:this.storeUser}),Object(O.jsx)(Ue,{storeUser:this.storeUser,fetchUser:this.fetchUser,loggedUser:this.state.loggedUser}),Object(O.jsx)(Me.a,{type:"circle",bg:!0})]})}}]),n}(a.Component)),Ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,293)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(O.jsx)(u.a,{children:Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(De,{})})}),document.getElementById("root")),Ie()}},[[251,1,2]]]);
//# sourceMappingURL=main.f0d3b4b3.chunk.js.map